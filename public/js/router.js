!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.RSVP={})}(this,(function(e){"use strict";function t(e){var t=e._promiseCallbacks;return t||(t=e._promiseCallbacks={}),t}function n(e,t){if(2!==arguments.length)return Q[e];Q[e]=t}function r(e,t,n){1===V.push({name:e,payload:{key:t._guidKey,id:t._id,eventName:e,detail:t._result,childId:n&&n._id,label:t._label,timeStamp:Date.now(),error:Q["instrument-with-stack"]?new Error(t._label):null}})&&setTimeout((function(){for(var e=0;e<V.length;e++){var t=V[e],n=t.payload;n.guid=n.key+n.id,n.childGuid=n.key+n.childId,n.error&&(n.stack=n.error.stack),Q.trigger(t.name,t.payload)}V.length=0}),50)}function i(e,t){if(e&&"object"==typeof e&&e.constructor===this)return e;var n=new this(o,t);return h(n,e),n}function o(){}function s(e){try{return e.then}catch(e){return K.error=e,K}}function a(){try{var e=J;return J=null,e.apply(this,arguments)}catch(e){return K.error=e,K}}function l(e){return J=e,a}function u(e,t,n){if(t.constructor===e.constructor&&n===g&&e.constructor.resolve===i)!function(e,t){t._state===G?f(e,t._result):t._state===W?(t._onError=null,d(e,t._result)):p(t,void 0,(function(n){t===n?f(e,n):h(e,n)}),(function(t){return d(e,t)}))}(e,t);else if(n===K){var r=K.error;K.error=null,d(e,r)}else"function"==typeof n?function(e,t,n){Q.async((function(e){var r=!1,i=l(n).call(t,(function(n){r||(r=!0,t===n?f(e,n):h(e,n))}),(function(t){r||(r=!0,d(e,t))}),"Settle: "+(e._label||" unknown promise"));if(!r&&i===K){r=!0;var o=K.error;K.error=null,d(e,o)}}),e)}(e,t,n):f(e,t)}function h(e,t){e===t?f(e,t):function(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}(t)?u(e,t,s(t)):f(e,t)}function c(e){e._onError&&e._onError(e._result),v(e)}function f(e,t){e._state===Y&&(e._result=t,e._state=G,0===e._subscribers.length?Q.instrument&&r("fulfilled",e):Q.async(v,e))}function d(e,t){e._state===Y&&(e._state=W,e._result=t,Q.async(c,e))}function p(e,t,n,r){var i=e._subscribers,o=i.length;e._onError=null,i[o]=t,i[o+G]=n,i[o+W]=r,0===o&&e._state&&Q.async(v,e)}function v(e){var t=e._subscribers,n=e._state;if(Q.instrument&&r(n===G?"fulfilled":"rejected",e),0!==t.length){for(var i=void 0,o=void 0,s=e._result,a=0;a<t.length;a+=3)i=t[a],o=t[a+n],i?m(n,i,o,s):o(s);e._subscribers.length=0}}function m(e,t,n,r){var i,o="function"==typeof n;if(i=o?l(n)(r):r,t._state!==Y);else if(i===t)d(t,new TypeError("A promises callback cannot return that same promise."));else if(i===K){var s=K.error;K.error=null,d(t,s)}else o?h(t,i):e===G?f(t,i):e===W&&d(t,i)}function g(e,t,n){var i=this,s=i._state;if(s===G&&!e||s===W&&!t)return Q.instrument&&r("chained",i,i),i;i._onError=null;var a=new i.constructor(o,n),l=i._result;if(Q.instrument&&r("chained",i,a),s===Y)p(i,a,e,t);else{var u=s===G?e:t;Q.async((function(){return m(s,a,u,l)}))}return a}function y(e,t,n){this._remaining--,this._result[t]=e===G?{state:"fulfilled",value:n}:{state:"rejected",reason:n}}function w(e,t){for(var n={},r=e.length,i=new Array(r),o=0;o<r;o++)i[o]=e[o];for(var s=0;s<t.length;s++){n[t[s]]=i[s+1]}return n}function b(e){for(var t=e.length,n=new Array(t-1),r=1;r<t;r++)n[r-1]=e[r];return n}function _(e,t){return{then:function(n,r){return e.call(t,n,r)}}}function P(e,t){var n=function(){for(var n=arguments.length,r=new Array(n+1),i=!1,s=0;s<n;++s){var a=arguments[s];if(!i){if((i=E(a))===K){var l=K.error;K.error=null;var u=new te(o);return d(u,l),u}i&&!0!==i&&(a=_(i,a))}r[s]=a}var c=new te(o);return r[n]=function(e,n){e?d(c,e):void 0===t?h(c,n):!0===t?h(c,b(arguments)):Array.isArray(t)?h(c,w(arguments,t)):h(c,n)},i?A(c,r,e,this):x(c,r,e,this)};return n.__proto__=e,n}function x(e,t,n,r){if(l(n).apply(r,t)===K){var i=K.error;K.error=null,d(e,i)}return e}function A(e,t,n,r){return te.all(t).then((function(t){return x(e,t,n,r)}))}function E(e){return null!==e&&"object"==typeof e&&(e.constructor===te||s(e))}function S(e,t){return te.all(e,t)}function T(e,t){return Array.isArray(e)?new ne(te,e,t).promise:te.reject(new TypeError("Promise.allSettled must be called with an array"),t)}function O(e,t){return te.race(e,t)}function I(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function R(e,t){return null===e||"object"!=typeof e?te.reject(new TypeError("Promise.hash must be called with an object"),t):new ie(te,e,t).promise}function C(e,t){return null===e||"object"!=typeof e?te.reject(new TypeError("RSVP.hashSettled must be called with an object"),t):new oe(te,e,!1,t).promise}function j(e){throw setTimeout((function(){throw e})),e}function H(e){var t={resolve:void 0,reject:void 0};return t.promise=new te((function(e,n){t.resolve=e,t.reject=n}),e),t}function L(e,t,n){return Array.isArray(e)?"function"!=typeof t?te.reject(new TypeError("RSVP.map expects a function as a second argument"),n):new ae(te,e,t,n).promise:te.reject(new TypeError("RSVP.map must be called with an array"),n)}function k(e,t){return te.resolve(e,t)}function z(e,t){return te.reject(e,t)}function U(e,t,n){return"function"!=typeof t?te.reject(new TypeError("RSVP.filter expects function as a second argument"),n):te.resolve(e,n).then((function(e){if(!Array.isArray(e))throw new TypeError("RSVP.filter must be called with an array");return new ue(te,e,t,n).promise}))}function q(e,t){ge[he]=e,ge[he+1]=t,2===(he+=2)&&ye()}function M(){return function(){return setTimeout(N,1)}}function N(){for(var e=0;e<he;e+=2){(0,ge[e])(ge[e+1]),ge[e]=void 0,ge[e+1]=void 0}he=0}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B(){Q.on.apply(Q,arguments)}function F(){Q.off.apply(Q,arguments)}var $={mixin:function(e){return e.on=this.on,e.off=this.off,e.trigger=this.trigger,e._promiseCallbacks=void 0,e},on:function(e,n){if("function"!=typeof n)throw new TypeError("Callback must be a function");var r=t(this),i=void 0;(i=r[e])||(i=r[e]=[]),i.indexOf(n)&&i.push(n)},off:function(e,n){var r=t(this),i=void 0,o=void 0;n?-1!==(o=(i=r[e]).indexOf(n))&&i.splice(o,1):r[e]=[]},trigger:function(e,n,r){var i;if(i=t(this)[e])for(var o=0;o<i.length;o++)(0,i[o])(n,r)}},Q={instrument:!1};$.mixin(Q);var V=[],Y=void 0,G=1,W=2,K={error:null},J=void 0,X=function(){function e(e,t,n,r){this._instanceConstructor=e,this.promise=new e(o,r),this._abortOnReject=n,this._isUsingOwnPromise=e===te,this._isUsingOwnResolve=e.resolve===i,this._init.apply(this,arguments)}return e.prototype._init=function(e,t){var n=t.length||0;this.length=n,this._remaining=n,this._result=new Array(n),this._enumerate(t)},e.prototype._enumerate=function(e){for(var t=this.length,n=this.promise,r=0;n._state===Y&&r<t;r++)this._eachEntry(e[r],r,!0);this._checkFullfillment()},e.prototype._checkFullfillment=function(){0===this._remaining&&f(this.promise,this._result)},e.prototype._settleMaybeThenable=function(e,t,n){var r=this._instanceConstructor;if(this._isUsingOwnResolve){var i=s(e);if(i===g&&e._state!==Y)e._onError=null,this._settledAt(e._state,t,e._result,n);else if("function"!=typeof i)this._settledAt(G,t,e,n);else if(this._isUsingOwnPromise){var a=new r(o);u(a,e,i),this._willSettleAt(a,t,n)}else this._willSettleAt(new r((function(t){return t(e)})),t,n)}else this._willSettleAt(r.resolve(e),t,n)},e.prototype._eachEntry=function(e,t,n){null!==e&&"object"==typeof e?this._settleMaybeThenable(e,t,n):this._setResultAt(G,t,e,n)},e.prototype._settledAt=function(e,t,n,r){var i=this.promise;i._state===Y&&(this._abortOnReject&&e===W?d(i,n):(this._setResultAt(e,t,n,r),this._checkFullfillment()))},e.prototype._setResultAt=function(e,t,n,r){this._remaining--,this._result[t]=n},e.prototype._willSettleAt=function(e,t,n){var r=this;p(e,void 0,(function(e){return r._settledAt(G,t,e,n)}),(function(e){return r._settledAt(W,t,e,n)}))},e}(),Z="rsvp_"+Date.now()+"-",ee=0,te=function(){function e(t,n){this._id=ee++,this._label=n,this._state=void 0,this._result=void 0,this._subscribers=[],Q.instrument&&r("created",this),o!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(e,t){var n=!1;try{t((function(t){n||(n=!0,h(e,t))}),(function(t){n||(n=!0,d(e,t))}))}catch(t){d(e,t)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype._onError=function(e){var t=this;Q.after((function(){t._onError&&Q.trigger("error",e,t._label)}))},e.prototype.catch=function(e,t){return this.then(void 0,e,t)},e.prototype.finally=function(e,t){var n=this.constructor;return this.then((function(t){return n.resolve(e()).then((function(){return t}))}),(function(t){return n.resolve(e()).then((function(){throw t}))}),t)},e}();te.all=function(e,t){return Array.isArray(e)?new X(this,e,!0,t).promise:this.reject(new TypeError("Promise.all must be called with an array"),t)},te.race=function(e,t){var n=new this(o,t);if(!Array.isArray(e))return d(n,new TypeError("Promise.race must be called with an array")),n;for(var r=0;n._state===Y&&r<e.length;r++)p(this.resolve(e[r]),void 0,(function(e){return h(n,e)}),(function(e){return d(n,e)}));return n},te.resolve=i,te.reject=function(e,t){var n=new this(o,t);return d(n,e),n},te.prototype._guidKey=Z,te.prototype.then=g;var ne=function(e){function t(t,n,r){return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,t,n,!1,r))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(X);ne.prototype._setResultAt=y;var re=Object.prototype.hasOwnProperty,ie=function(e){function t(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments[3];return I(this,e.call(this,t,n,r,i))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._init=function(e,t){this._result={},this._enumerate(t),0===this._remaining&&f(this.promise,this._result)},t.prototype._enumerate=function(e){var t=this.promise,n=[];for(var r in e)re.call(e,r)&&n.push({position:r,entry:e[r]});var i=n.length;this._remaining=i;for(var o=void 0,s=0;t._state===Y&&s<i;s++)o=n[s],this._eachEntry(o.entry,o.position)},t}(X),oe=function(e){function t(t,n,r){return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,t,n,!1,r))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(ie);oe.prototype._setResultAt=y;var se,ae=function(e){function t(t,n,r,i){return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,t,n,!0,i,r))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._init=function(e,t,n,r,i){var o=t.length||0;this.length=o,this._remaining=o,this._result=new Array(o),this._mapFn=i,this._enumerate(t)},t.prototype._setResultAt=function(e,t,n,r){if(r){var i=l(this._mapFn)(n,t);i===K?this._settledAt(W,t,i.error,!1):this._eachEntry(i,t,!1)}else this._remaining--,this._result[t]=n},t}(X),le={},ue=function(e){function t(t,n,r,i){return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,t,n,!0,i,r))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._init=function(e,t,n,r,i){var o=t.length||0;this.length=o,this._remaining=o,this._result=new Array(o),this._filterFn=i,this._enumerate(t)},t.prototype._checkFullfillment=function(){0===this._remaining&&(this._result=this._result.filter((function(e){return e!==le})),f(this.promise,this._result))},t.prototype._setResultAt=function(e,t,n,r){if(r){this._result[t]=n;var i=l(this._filterFn)(n,t);i===K?this._settledAt(W,t,i.error,!1):this._eachEntry(i,t,!1)}else this._remaining--,n||(this._result[t]=le)},t}(X),he=0,ce=void 0,fe="undefined"!=typeof window?window:void 0,de=fe||{},pe=de.MutationObserver||de.WebKitMutationObserver,ve="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),me="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ge=new Array(1e3),ye=void 0;ye=ve?function(){var e=process.nextTick,t=process.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(t)&&"0"===t[1]&&"10"===t[2]&&(e=setImmediate),function(){return e(N)}}():pe?function(){var e=0,t=new pe(N),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){return n.data=e=++e%2}}():me?function(){var e=new MessageChannel;return e.port1.onmessage=N,function(){return e.port2.postMessage(0)}}():void 0===fe&&"function"==typeof require?function(){try{var e=require("vertx");return void 0!==(ce=e.runOnLoop||e.runOnContext)?function(){ce(N)}:M()}catch(e){return M()}}():M(),Q.async=q,Q.after=function(e){return setTimeout(e,0)};var we=function(e,t){return Q.async(e,t)};if("undefined"!=typeof window&&"object"==typeof window.__PROMISE_INSTRUMENTATION__){var be=window.__PROMISE_INSTRUMENTATION__;for(var _e in n("instrument",!0),be)be.hasOwnProperty(_e)&&B(_e,be[_e])}var Pe=(D(se={asap:q,Promise:te,EventTarget:$,all:S,allSettled:T,race:O,hash:R,hashSettled:C,rethrow:j,defer:H,denodeify:P,configure:n,on:B,off:F,resolve:k,reject:z,map:L},"async",we),D(se,"filter",U),se);e.default=Pe,e.asap=q,e.Promise=te,e.EventTarget=$,e.all=S,e.allSettled=T,e.race=O,e.hash=R,e.hashSettled=C,e.rethrow=j,e.defer=H,e.denodeify=P,e.configure=n,e.on=B,e.off=F,e.resolve=k,e.reject=z,e.map=L,e.async=we,e.filter=U,Object.defineProperty(e,"__esModule",{value:!0})})),function(e){function t(e,t,n,r,i){this._listener=t,this._isOnce=n,this.context=r,this._signal=e,this._priority=i||0}function n(e,t){if("function"!=typeof e)throw Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",t))}function r(){this._bindings=[],this._prevParams=null;var e=this;this.dispatch=function(){r.prototype.dispatch.apply(e,arguments)}}t.prototype={active:!0,params:null,execute:function(e){var t;return this.active&&this._listener&&(e=this.params?this.params.concat(e):e,t=this._listener.apply(this.context,e),this._isOnce&&this.detach()),t},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},r.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(e,n,r,i){var o=this._indexOfListener(e,r);if(-1!==o){if((e=this._bindings[o]).isOnce()!==n)throw Error("You cannot add"+(n?"":"Once")+"() then add"+(n?"Once":"")+"() the same listener without removing the relationship first.")}else e=new t(this,e,n,r,i),this._addBinding(e);return this.memorize&&this._prevParams&&e.execute(this._prevParams),e},_addBinding:function(e){var t=this._bindings.length;do{--t}while(this._bindings[t]&&e._priority<=this._bindings[t]._priority);this._bindings.splice(t+1,0,e)},_indexOfListener:function(e,t){for(var n,r=this._bindings.length;r--;)if((n=this._bindings[r])._listener===e&&n.context===t)return r;return-1},has:function(e,t){return-1!==this._indexOfListener(e,t)},add:function(e,t,r){return n(e,"add"),this._registerListener(e,!1,t,r)},addOnce:function(e,t,r){return n(e,"addOnce"),this._registerListener(e,!0,t,r)},remove:function(e,t){n(e,"remove");var r=this._indexOfListener(e,t);return-1!==r&&(this._bindings[r]._destroy(),this._bindings.splice(r,1)),e},removeAll:function(){for(var e=this._bindings.length;e--;)this._bindings[e]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(e){if(this.active){var t,n=Array.prototype.slice.call(arguments),r=this._bindings.length;if(this.memorize&&(this._prevParams=n),r){t=this._bindings.slice(),this._shouldPropagate=!0;do{r--}while(t[r]&&this._shouldPropagate&&!1!==t[r].execute(n))}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var i=r;i.Signal=r,"function"==typeof define&&define.amd?define((function(){return i})):"undefined"!=typeof module&&module.exports?module.exports=i:e.signals=i}(this),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("route-recognizer",t):e.RouteRecognizer=t()}(this,(function(){"use strict";var e=Object.create;function t(){var t=e(null);return t.__=void 0,delete t.__,t}var n=function(e,t,n){this.path=e,this.matcher=t,this.delegate=n};n.prototype.to=function(e,t){var n=this.delegate;if(n&&n.willAddRoute&&(e=n.willAddRoute(this.matcher.target,e)),this.matcher.add(this.path,e),t){if(0===t.length)throw new Error("You must have an argument in the function passed to `to`");this.matcher.addChild(this.path,e,t,this.delegate)}};var r=function(e){this.routes=t(),this.children=t(),this.target=e};function i(e,t,r){return function(o,s){var a=e+o;if(!s)return new n(a,t,r);s(i(a,t,r))}}function o(e,t,n){for(var r=0,i=0;i<e.length;i++)r+=e[i].path.length;var o={path:t=t.substr(r),handler:n};e.push(o)}function s(e,t,n,r){for(var i=t.routes,a=Object.keys(i),l=0;l<a.length;l++){var u=a[l],h=e.slice();o(h,u,i[u]);var c=t.children[u];c?s(h,c,n,r):n.call(r,h)}}r.prototype.add=function(e,t){this.routes[e]=t},r.prototype.addChild=function(e,t,n,o){var s=new r(t);this.children[e]=s;var a=i(e,s,o);o&&o.contextEntered&&o.contextEntered(t,a),n(a)};function a(e){return e.split("/").map(u).join("/")}var l=/%|\//g;function u(e){return e.length<3||-1===e.indexOf("%")?e:decodeURIComponent(e).replace(l,encodeURIComponent)}var h=/%(?:2(?:4|6|B|C)|3(?:B|D|A)|40)/g;function c(e){return encodeURIComponent(e).replace(h,decodeURIComponent)}var f=/(\/|\.|\*|\+|\?|\||\(|\)|\[|\]|\{|\}|\\)/g,d=Array.isArray,p=Object.prototype.hasOwnProperty;function v(e,t){if("object"!=typeof e||null===e)throw new Error("You must pass an object as the second argument to `generate`.");if(!p.call(e,t))throw new Error("You must provide param `"+t+"` to `generate`.");var n=e[t],r="string"==typeof n?n:""+n;if(0===r.length)throw new Error("You must provide a param `"+t+"`.");return r}var m=[];m[0]=function(e,t){for(var n=t,r=e.value,i=0;i<r.length;i++){var o=r.charCodeAt(i);n=n.put(o,!1,!1)}return n},m[1]=function(e,t){return t.put(47,!0,!0)},m[2]=function(e,t){return t.put(-1,!1,!0)},m[4]=function(e,t){return t};var g=[];g[0]=function(e){return e.value.replace(f,"\\$1")},g[1]=function(){return"([^/]+)"},g[2]=function(){return"(.+)"},g[4]=function(){return""};var y=[];y[0]=function(e){return e.value},y[1]=function(e,t){var n=v(t,e.value);return O.ENCODE_AND_DECODE_PATH_SEGMENTS?c(n):n},y[2]=function(e,t){return v(t,e.value)},y[4]=function(){return""};var w=Object.freeze({}),b=Object.freeze([]);function _(e,t,n){t.length>0&&47===t.charCodeAt(0)&&(t=t.substr(1));for(var r=t.split("/"),i=void 0,o=void 0,s=0;s<r.length;s++){var a,l=r[s],h=0;12&(a=2<<(h=""===l?4:58===l.charCodeAt(0)?1:42===l.charCodeAt(0)?2:0))&&(l=l.slice(1),(i=i||[]).push(l),(o=o||[]).push(0!=(4&a))),14&a&&n[h]++,e.push({type:h,value:u(l)})}return{names:i||b,shouldDecodes:o||b}}function P(e,t,n){return e.char===t&&e.negate===n}var x=function(e,t,n,r,i){this.states=e,this.id=t,this.char=n,this.negate=r,this.nextStates=i?t:null,this.pattern="",this._regex=void 0,this.handlers=void 0,this.types=void 0};function A(e,t){return e.negate?e.char!==t&&-1!==e.char:e.char===t||-1===e.char}function E(e,t){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];n=n.concat(o.match(t))}return n}x.prototype.regex=function(){return this._regex||(this._regex=new RegExp(this.pattern)),this._regex},x.prototype.get=function(e,t){var n=this.nextStates;if(null!==n)if(d(n))for(var r=0;r<n.length;r++){var i=this.states[n[r]];if(P(i,e,t))return i}else{var o=this.states[n];if(P(o,e,t))return o}},x.prototype.put=function(e,t,n){var r;if(r=this.get(e,t))return r;var i=this.states;return r=new x(i,i.length,e,t,n),i[i.length]=r,null==this.nextStates?this.nextStates=r.id:d(this.nextStates)?this.nextStates.push(r.id):this.nextStates=[this.nextStates,r.id],r},x.prototype.match=function(e){var t=this.nextStates;if(!t)return[];var n=[];if(d(t))for(var r=0;r<t.length;r++){var i=this.states[t[r]];A(i,e)&&n.push(i)}else{var o=this.states[t];A(o,e)&&n.push(o)}return n};var S=function(e){this.length=0,this.queryParams=e||{}};function T(e){var t;e=e.replace(/\+/gm,"%20");try{t=decodeURIComponent(e)}catch(e){t=""}return t}S.prototype.splice=Array.prototype.splice,S.prototype.slice=Array.prototype.slice,S.prototype.push=Array.prototype.push;var O=function(){this.names=t();var e=[],n=new x(e,0,-1,!0,!1);e[0]=n,this.states=e,this.rootState=n};return O.prototype.add=function(e,t){for(var n,r=this.rootState,i="^",o=[0,0,0],s=new Array(e.length),a=[],l=!0,u=0,h=0;h<e.length;h++){for(var c=e[h],f=_(a,c.path,o),d=f.names,p=f.shouldDecodes;u<a.length;u++){var v=a[u];4!==v.type&&(l=!1,r=r.put(47,!1,!1),i+="/",r=m[v.type](v,r),i+=g[v.type](v))}s[h]={handler:c.handler,names:d,shouldDecodes:p}}l&&(r=r.put(47,!1,!1),i+="/"),r.handlers=s,r.pattern=i+"$",r.types=o,"object"==typeof t&&null!==t&&t.as&&(n=t.as),n&&(this.names[n]={segments:a,handlers:s})},O.prototype.handlersFor=function(e){var t=this.names[e];if(!t)throw new Error("There is no route named "+e);for(var n=new Array(t.handlers.length),r=0;r<t.handlers.length;r++){var i=t.handlers[r];n[r]=i}return n},O.prototype.hasRoute=function(e){return!!this.names[e]},O.prototype.generate=function(e,t){var n=this.names[e],r="";if(!n)throw new Error("There is no route named "+e);for(var i=n.segments,o=0;o<i.length;o++){var s=i[o];4!==s.type&&(r+="/",r+=y[s.type](s,t))}return"/"!==r.charAt(0)&&(r="/"+r),t&&t.queryParams&&(r+=this.generateQueryString(t.queryParams)),r},O.prototype.generateQueryString=function(e){var t=[],n=Object.keys(e);n.sort();for(var r=0;r<n.length;r++){var i=n[r],o=e[i];if(null!=o){var s=encodeURIComponent(i);if(d(o))for(var a=0;a<o.length;a++){var l=i+"[]="+encodeURIComponent(o[a]);t.push(l)}else s+="="+encodeURIComponent(o),t.push(s)}}return 0===t.length?"":"?"+t.join("&")},O.prototype.parseQueryString=function(e){for(var t=e.split("&"),n={},r=0;r<t.length;r++){var i=t[r].split("="),o=T(i[0]),s=o.length,a=!1,l=void 0;1===i.length?l="true":(s>2&&"[]"===o.slice(s-2)&&(a=!0,n[o=o.slice(0,s-2)]||(n[o]=[])),l=i[1]?T(i[1]):""),a?n[o].push(l):n[o]=l}return n},O.prototype.recognize=function(e){var t,n=[this.rootState],r={},i=!1,o=e.indexOf("#");-1!==o&&(e=e.substr(0,o));var s=e.indexOf("?");if(-1!==s){var l=e.substr(s+1,e.length);e=e.substr(0,s),r=this.parseQueryString(l)}"/"!==e.charAt(0)&&(e="/"+e);var u=e;O.ENCODE_AND_DECODE_PATH_SEGMENTS?e=a(e):(e=decodeURI(e),u=decodeURI(u));var h=e.length;h>1&&"/"===e.charAt(h-1)&&(e=e.substr(0,h-1),u=u.substr(0,u.length-1),i=!0);for(var c=0;c<e.length&&(n=E(n,e.charCodeAt(c))).length;c++);for(var f=[],d=0;d<n.length;d++)n[d].handlers&&f.push(n[d]);n=function(e){return e.sort((function(e,t){var n=e.types||[0,0,0],r=n[0],i=n[1],o=n[2],s=t.types||[0,0,0],a=s[0],l=s[1],u=s[2];if(o!==u)return o-u;if(o){if(r!==a)return a-r;if(i!==l)return l-i}return i!==l?i-l:r!==a?a-r:0}))}(f);var p=f[0];return p&&p.handlers&&(i&&p.pattern&&"(.+)$"===p.pattern.slice(-5)&&(u+="/"),t=function(e,t,n){var r=e.handlers,i=e.regex();if(!i||!r)throw new Error("state not initialized");var o=t.match(i),s=1,a=new S(n);a.length=r.length;for(var l=0;l<r.length;l++){var u=r[l],h=u.names,c=u.shouldDecodes,f=w,d=!1;if(h!==b&&c!==b)for(var p=0;p<h.length;p++){d=!0;var v=h[p],m=o&&o[s++];f===w&&(f={}),O.ENCODE_AND_DECODE_PATH_SEGMENTS&&c[p]?f[v]=m&&decodeURIComponent(m):f[v]=m}a[l]={handler:u.handler,params:f,isDynamic:d}}return a}(p,u,r)),t},O.VERSION="0.3.4",O.ENCODE_AND_DECODE_PATH_SEGMENTS=!0,O.Normalizer={normalizeSegment:u,normalizePath:a,encodePathSegment:c},O.prototype.map=function(e,t){var n=new r;e(i("",n,this.delegate)),s([],n,(function(e){t?t(this,e):this.add(e)}),this)},O})),function(e,t,n){var r,i;!function(){var e={},t={};r=function(t,n,r){e[t]={deps:n,callback:r}},i=function(n){if(t[n])return t[n];if(t[n]={},!e[n])throw new Error("Could not find module "+n);for(var r,o=e[n],s=o.deps,a=o.callback,l=[],u=0,h=s.length;u<h;u++)"exports"===s[u]?l.push(r={}):l.push(i(f(s[u])));var c=a.apply(this,l);return t[n]=r||c;function f(e){if("."!==e.charAt(0))return e;for(var t=e.split("/"),r=n.split("/").slice(0,-1),i=0,o=t.length;i<o;i++){var s=t[i];if(".."===s)r.pop();else{if("."===s)continue;r.push(s)}}return r.join("/")}}}(),r("router/handler-info",["./utils","rsvp","exports"],(function(e,t,n){"use strict";var r=e.bind,i=e.merge,o=e.promiseLabel,s=e.applyHook,a=e.isPromise,l=t.Promise,u=Object.freeze({});function h(e){var t=e||{};if(this._handler=u,t.handler){var n=t.name;this.handlerPromise=l.resolve(t.handler),a(t.handler)?(this.handlerPromise=this.handlerPromise.then(r(this,this.updateHandler)),t.handler=void 0):t.handler&&(t.handler._handlerName=n)}i(this,t),this.initialize(t)}h.prototype={name:null,getHandler:function(){},fetchHandler:function(){var e=this.getHandler(this.name);if(this.handlerPromise=l.resolve(e),a(e))this.handlerPromise=this.handlerPromise.then(r(this,this.updateHandler));else if(e)return e._handlerName=this.name,this.handler=e;return this.handler=void 0},_handlerPromise:void 0,params:null,context:null,factory:null,initialize:function(){},log:function(e,t){e.log&&e.log(this.name+": "+t)},promiseLabel:function(e){return o("'"+this.name+"' "+e)},getUnresolved:function(){return this},serialize:function(){return this.params||{}},updateHandler:function(e){return e._handlerName=this.name,this.handler=e},resolve:function(e,t){var n=r(this,this.checkForAbort,e),i=r(this,this.runBeforeModelHook,t),o=r(this,this.getModel,t),s=r(this,this.runAfterModelHook,t),a=r(this,this.becomeResolved,t),u=this;return l.resolve(this.handlerPromise,this.promiseLabel("Start handler")).then((function(e){return l.resolve(e).then(n,null,u.promiseLabel("Check for abort")).then(i,null,u.promiseLabel("Before model")).then(n,null,u.promiseLabel("Check if aborted during 'beforeModel' hook")).then(o,null,u.promiseLabel("Model")).then(n,null,u.promiseLabel("Check if aborted in 'model' hook")).then(s,null,u.promiseLabel("After model")).then(n,null,u.promiseLabel("Check if aborted in 'afterModel' hook")).then(a,null,u.promiseLabel("Become resolved"))}),(function(e){throw e}))},runBeforeModelHook:function(e){return e.trigger&&e.trigger(!0,"willResolveModel",e,this.handler),this.runSharedModelHook(e,"beforeModel",[])},runAfterModelHook:function(e,t){var n=this.name;return this.stashResolvedModel(e,t),this.runSharedModelHook(e,"afterModel",[t]).then((function(){return e.resolvedModels[n]}),null,this.promiseLabel("Ignore fulfillment value and return model value"))},runSharedModelHook:function(e,t,n){this.log(e,"calling "+t+" hook"),this.queryParams&&n.push(this.queryParams),n.push(e);var r=s(this.handler,t,n);return r&&r.isTransition&&(r=null),l.resolve(r,this.promiseLabel("Resolve value returned from one of the model hooks"))},getModel:null,checkForAbort:function(e,t){return l.resolve(e(),this.promiseLabel("Check for abort")).then((function(){return t}),null,this.promiseLabel("Ignore fulfillment value and continue"))},stashResolvedModel:function(e,t){e.resolvedModels=e.resolvedModels||{},e.resolvedModels[this.name]=t},becomeResolved:function(e,t){var n=this.serialize(t);return e&&(this.stashResolvedModel(e,t),e.params=e.params||{},e.params[this.name]=n),this.factory("resolved",{context:t,name:this.name,handler:this.handler,params:n})},shouldSupercede:function(e){if(!e)return!0;var t=e.context===this.context;return e.name!==this.name||this.hasOwnProperty("context")&&!t||this.hasOwnProperty("params")&&!function(e,t){if(!e^!t)return!1;if(!e)return!0;for(var n in e)if(e.hasOwnProperty(n)&&e[n]!==t[n])return!1;return!0}(this.params,e.params)}},Object.defineProperty(h.prototype,"handler",{get:function(){return this._handler!==u?this._handler:this.fetchHandler()},set:function(e){return this._handler=e}}),Object.defineProperty(h.prototype,"handlerPromise",{get:function(){return this._handlerPromise||this.fetchHandler(),this._handlerPromise},set:function(e){return this._handlerPromise=e}}),n.default=h})),r("router/handler-info/factory",["./resolved-handler-info","./unresolved-handler-info-by-object","./unresolved-handler-info-by-param","exports"],(function(e,t,n,r){"use strict";var i=e.default,o=t.default,s=n.default;function a(e,t){var n=new(0,a.klasses[e])(t||{});return n.factory=a,n}a.klasses={resolved:i,param:s,object:o},r.default=a})),r("router/handler-info/resolved-handler-info",["../handler-info","../utils","rsvp","exports"],(function(e,t,n,r){"use strict";var i=e.default,o=t.subclass,s=n.Promise,a=o(i,{resolve:function(e,t){return t&&t.resolvedModels&&(t.resolvedModels[this.name]=this.context),s.resolve(this,this.promiseLabel("Resolve"))},getUnresolved:function(){return this.factory("param",{name:this.name,handler:this.handler,params:this.params})},isResolved:!0});r.default=a})),r("router/handler-info/unresolved-handler-info-by-object",["../handler-info","../utils","rsvp","exports"],(function(e,t,n,r){"use strict";var i=e.default,o=t.subclass,s=t.isParam,a=n.Promise,l=o(i,{getModel:function(e){return this.log(e,this.name+": resolving provided model"),a.resolve(this.context)},initialize:function(e){this.names=e.names||[],this.context=e.context},serialize:function(e){var t=e||this.context,n=this.names,r=this.serializer||this.handler&&this.handler.serialize,i={};if(s(t))return i[n[0]]=t,i;if(r)return r(t,n);if(1===n.length){var o=n[0];return/_id$/.test(o)?i[o]=t.id:i[o]=t,i}}});r.default=l})),r("router/handler-info/unresolved-handler-info-by-param",["../handler-info","../utils","exports"],(function(e,t,n){"use strict";var r=e.default,i=t.resolveHook,o=t.merge,s=(0,t.subclass)(r,{initialize:function(e){this.params=e.params||{}},getModel:function(e){var t=this.params;e&&e.queryParams&&(o(t={},this.params),t.queryParams=e.queryParams);var n=this.handler,r=i(n,"deserialize")||i(n,"model");return this.runSharedModelHook(e,r,[t])}});n.default=s})),r("router/router",["route-recognizer","rsvp","./utils","./transition-state","./transition","./transition-aborted-error","./transition-intent/named-transition-intent","./transition-intent/url-transition-intent","exports"],(function(e,t,n,r,i,o,s,a,l){"use strict";var u=e.default,h=t.Promise,c=n.trigger,f=n.log,d=n.slice,p=n.forEach,v=n.merge,m=n.extractQueryParams,g=n.getChangelist,y=n.promiseLabel,w=n.callHook,b=r.default,_=i.logAbort,P=i.Transition,x=o.default,A=s.default,E=a.default,S=Array.prototype.pop;function T(e){var t=e||{};this.getHandler=t.getHandler||this.getHandler,this.getSerializer=t.getSerializer||this.getSerializer,this.updateURL=t.updateURL||this.updateURL,this.replaceURL=t.replaceURL||this.replaceURL,this.didTransition=t.didTransition||this.didTransition,this.willTransition=t.willTransition||this.willTransition,this.delegate=t.delegate||this.delegate,this.triggerEvent=t.triggerEvent||this.triggerEvent,this.log=t.log||this.log,this.dslCallBacks=[],this.state=void 0,this.activeTransition=void 0,this._changedQueryParams=void 0,this.oldState=void 0,this.currentHandlerInfos=void 0,this.state=void 0,this.currentSequence=0,this.recognizer=new u,this.reset()}function O(e,t){var n,r=!!this.activeTransition,i=r?this.activeTransition.state:this.state,o=e.applyToState(i,this.recognizer,this.getHandler,t,this.getSerializer),s=g(i.queryParams,o.queryParams);return L(o.handlerInfos,i.handlerInfos)?s&&(n=this.queryParamsTransition(s,r,i,o))?(n.queryParamsOnly=!0,n):this.activeTransition||new P(this):t?void R(this,o):(n=new P(this,e,o,void 0,this.activeTransition),function(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;++n){if(e[n].name!==t[n].name)return!1;if(!k(e[n].params,t[n].params))return!1}return!0}(o.handlerInfos,i.handlerInfos)&&(n.queryParamsOnly=!0),this.activeTransition&&this.activeTransition.abort(),this.activeTransition=n,n.promise=n.promise.then((function(e){return function(e,t){try{f(e.router,e.sequence,"Resolved all models on destination route; finalizing transition.");var n=e.router,r=t.handlerInfos;return R(n,t,e),e.isAborted?(n.state.handlerInfos=n.currentHandlerInfos,h.reject(_(e))):(j(e,t,e.intent.url),e.isActive=!1,n.activeTransition=null,c(n,n.currentHandlerInfos,!0,["didTransition"]),n.didTransition&&n.didTransition(n.currentHandlerInfos),f(n,e.sequence,"TRANSITION COMPLETE."),r[r.length-1].handler)}catch(t){if(!(t instanceof x)){var i=e.state.handlerInfos;e.trigger(!0,"error",t,e,i[i.length-1].handler),e.abort()}throw t}}(n,e.state)}),null,y("Settle transition promise when transition is finalized")),r||function(e,t,n){var r,i,o,s,a,l=e.state.handlerInfos,u=[],h=null;for(o=l.length,i=0;i<o;i++){if(s=l[i],!(a=t.handlerInfos[i])||s.name!==a.name){h=i;break}a.isResolved||u.push(s)}null!==h&&(r=l.slice(h,o),function(e){for(var t=0,n=r.length;t<n;t++)if(r[t].name===e)return!0;return!1});c(e,l,!0,["willTransition",n]),e.willTransition&&e.willTransition(l,t.handlerInfos,n)}(this,o,n),I(this,o,s),n)}function I(e,t,n){n&&(e._changedQueryParams=n.all,c(e,t.handlerInfos,!0,["queryParamsDidChange",n.changed,n.all,n.removed]),e._changedQueryParams=null)}function R(e,t,n){var r,i,o,s=function(e,t){var n,r,i,o=e.handlerInfos,s=t.handlerInfos,a={updatedContext:[],exited:[],entered:[],unchanged:[],reset:void 0},l=!1;for(r=0,i=s.length;r<i;r++){var u=o[r],h=s[r];u&&u.handler===h.handler||(n=!0),n?(a.entered.push(h),u&&a.exited.unshift(u)):l||u.context!==h.context?(l=!0,a.updatedContext.push(h)):a.unchanged.push(u)}for(r=s.length,i=o.length;r<i;r++)a.exited.unshift(o[r]);return a.reset=a.updatedContext.slice(),a.reset.reverse(),a}(e.state,t);for(r=0,i=s.exited.length;r<i;r++)delete(o=s.exited[r].handler).context,w(o,"reset",!0,n),w(o,"exit",n);var a=e.oldState=e.state;e.state=t;var l=e.currentHandlerInfos=s.unchanged.slice();try{for(r=0,i=s.reset.length;r<i;r++)o=s.reset[r].handler,w(o,"reset",!1,n);for(r=0,i=s.updatedContext.length;r<i;r++)C(l,s.updatedContext[r],!1,n);for(r=0,i=s.entered.length;r<i;r++)C(l,s.entered[r],!0,n)}catch(t){throw e.state=a,e.currentHandlerInfos=a.handlerInfos,t}e.state.queryParams=z(e,l,t.queryParams,n)}function C(e,t,n,r){var i=t.handler,o=t.context;function s(i){if(n&&w(i,"enter",r),r&&r.isAborted)throw new x;if(i.context=o,w(i,"contextDidChange"),w(i,"setup",o,r),r&&r.isAborted)throw new x;e.push(t)}return i?s(i):t.handlerPromise=t.handlerPromise.then(s),!0}function j(e,t){var n=e.urlMethod;if(n){for(var r=e.router,i=t.handlerInfos,o=i[i.length-1].name,s={},a=i.length-1;a>=0;--a){var l=i[a];v(s,l.params),l.handler.inaccessibleByURL&&(n=null)}if(n){s.queryParams=e._visibleQueryParams||t.queryParams;var u=r.recognizer.generate(o,s),h=e.isCausedByInitialTransition,c="replace"===n&&!e.isCausedByAbortingTransition,f=e.queryParamsOnly&&"replace"===n;h||c||f?r.replaceURL(u):r.updateURL(u)}}}function H(e,t,n){var r,i=t[0]||"/",o=t[t.length-1],s={};if(o&&o.hasOwnProperty("queryParams")&&(s=S.call(t).queryParams),0===t.length){f(e,"Updating query params");var a=e.state.handlerInfos;r=new A({name:a[a.length-1].name,contexts:[],queryParams:s})}else"/"===i.charAt(0)?(f(e,"Attempting URL transition to "+i),r=new E({url:i})):(f(e,"Attempting transition to "+i),r=new A({name:t[0],contexts:d.call(t,1),queryParams:s}));return e.transitionByIntent(r,n)}function L(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;++n)if(e[n]!==t[n])return!1;return!0}function k(e,t){if(!e&&!t)return!0;if(!e&&t||e&&!t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0,o=n.length;i<o;++i){var s=n[i];if(e[s]!==t[s])return!1}return!0}function z(e,t,n,r){for(var i in n)n.hasOwnProperty(i)&&null===n[i]&&delete n[i];var o=[];c(e,t,!0,["finalizeQueryParamChange",n,o,r]),r&&(r._visibleQueryParams={});for(var s={},a=0,l=o.length;a<l;++a){var u=o[a];s[u.key]=u.value,r&&!1!==u.visible&&(r._visibleQueryParams[u.key]=u.value)}return s}T.prototype={map:function(e){this.recognizer.delegate=this.delegate,this.recognizer.map(e,(function(e,t){for(var n=t.length-1,r=!0;n>=0&&r;--n){var i=t[n];e.add(t,{as:i.handler}),r="/"===i.path||""===i.path||".index"===i.handler.slice(-6)}}))},hasRoute:function(e){return this.recognizer.hasRoute(e)},getHandler:function(){},getSerializer:function(){},queryParamsTransition:function(e,t,n,r){var i=this;if(I(this,r,e),!t&&this.activeTransition)return this.activeTransition;var o=new P(this);return o.queryParamsOnly=!0,n.queryParams=z(this,r.handlerInfos,r.queryParams,o),o.promise=o.promise.then((function(e){return j(o,n),i.didTransition&&i.didTransition(i.currentHandlerInfos),e}),null,y("Transition complete")),o},transitionByIntent:function(e){try{return O.apply(this,arguments)}catch(t){return new P(this,e,null,t)}},reset:function(){this.state&&p(this.state.handlerInfos.slice().reverse(),(function(e){var t=e.handler;w(t,"exit")})),this.oldState=void 0,this.state=new b,this.currentHandlerInfos=null},activeTransition:null,handleURL:function(e){var t=d.call(arguments);return"/"!==e.charAt(0)&&(t[0]="/"+e),H(this,t).method(null)},updateURL:function(){throw new Error("updateURL is not implemented")},replaceURL:function(e){this.updateURL(e)},transitionTo:function(){return H(this,arguments)},intermediateTransitionTo:function(){return H(this,arguments,!0)},refresh:function(e){for(var t=this.activeTransition,n=t?t.state:this.state,r=n.handlerInfos,i={},o=0,s=r.length;o<s;++o){var a=r[o];i[a.name]=a.params||{}}f(this,"Starting a refresh transition");var l=new A({name:r[r.length-1].name,pivotHandler:e||r[0].handler,contexts:[],queryParams:this._changedQueryParams||n.queryParams||{}}),u=this.transitionByIntent(l,!1);return t&&"replace"===t.urlMethod&&u.method(t.urlMethod),u},replaceWith:function(){return H(this,arguments).method("replace")},generate:function(e){for(var t=m(d.call(arguments,1)),n=t[0],r=t[1],i=new A({name:e,contexts:n}),o=i.applyToState(this.state,this.recognizer,this.getHandler,null,this.getSerializer),s={},a=0,l=o.handlerInfos.length;a<l;++a){var u=o.handlerInfos[a],h=u.serialize();v(s,h)}return s.queryParams=r,this.recognizer.generate(e,s)},applyIntent:function(e,t){var n=new A({name:e,contexts:t}),r=this.activeTransition&&this.activeTransition.state||this.state;return n.applyToState(r,this.recognizer,this.getHandler,null,this.getSerializer)},isActiveIntent:function(e,t,n,r){var i,o=r||this.state,s=o.handlerInfos;if(!s.length)return!1;var a=s[s.length-1].name,l=this.recognizer.handlersFor(a),u=0;for(i=l.length;u<i&&s[u].name!==e;++u);if(u===l.length)return!1;var h=new b;h.handlerInfos=s.slice(0,u+1),l=l.slice(0,u+1);var c=L(new A({name:a,contexts:t}).applyToHandlers(h,l,this.getHandler,a,!0,!0,this.getSerializer).handlerInfos,h.handlerInfos);if(!n||!c)return c;var f={};v(f,n);var d=o.queryParams;for(var p in d)d.hasOwnProperty(p)&&f.hasOwnProperty(p)&&(f[p]=d[p]);return c&&!g(f,n)},isActive:function(e){var t=m(d.call(arguments,1));return this.isActiveIntent(e,t[0],t[1])},trigger:function(){var e=d.call(arguments);c(this,this.currentHandlerInfos,!1,e)},log:null},l.default=T})),r("router/transition-aborted-error",["./utils","exports"],(function(e,t){"use strict";var n=e.oCreate;function r(e){if(!(this instanceof r))return new r(e);var t=Error.call(this,e);Error.captureStackTrace?Error.captureStackTrace(this,r):this.stack=t.stack,this.description=t.description,this.fileName=t.fileName,this.lineNumber=t.lineNumber,this.message=t.message||"TransitionAborted",this.name="TransitionAborted",this.number=t.number,this.code=t.code}r.prototype=n(Error.prototype),t.default=r})),r("router/transition-intent",["exports"],(function(e){"use strict";function t(e){this.initialize(e),this.data=this.data||{}}t.prototype={initialize:null,applyToState:null},e.default=t})),r("router/transition-intent/named-transition-intent",["../transition-intent","../transition-state","../handler-info/factory","../utils","exports"],(function(e,t,n,r,i){"use strict";var o=e.default,s=t.default,a=n.default,l=r.isParam,u=r.extractQueryParams,h=r.merge,c=r.subclass;i.default=c(o,{name:null,pivotHandler:null,contexts:null,queryParams:null,initialize:function(e){this.name=e.name,this.pivotHandler=e.pivotHandler,this.contexts=e.contexts||[],this.queryParams=e.queryParams},applyToState:function(e,t,n,r,i){var o=u([this.name].concat(this.contexts))[0],s=t.handlersFor(o[0]),a=s[s.length-1].handler;return this.applyToHandlers(e,s,n,a,r,null,i)},applyToHandlers:function(e,t,n,r,i,o,a){var l,u,c=new s,f=this.contexts.slice(0),d=t.length;if(this.pivotHandler)for(l=0,u=t.length;l<u;++l)if(t[l].handler===this.pivotHandler._handlerName){d=l;break}for(l=t.length-1;l>=0;--l){var p=t[l],v=p.handler,m=e.handlerInfos[l],g=null;if(p.names.length>0)if(l>=d)g=this.createParamHandlerInfo(v,n,p.names,f,m);else{var y=a(v);g=this.getHandlerInfoForDynamicSegment(v,n,p.names,f,m,r,l,y)}else g=this.createParamHandlerInfo(v,n,p.names,f,m);if(o){g=g.becomeResolved(null,g.context);var w=m&&m.context;p.names.length>0&&g.context===w&&(g.params=m&&m.params),g.context=w}var b=m;(l>=d||g.shouldSupercede(m))&&(d=Math.min(l,d),b=g),i&&!o&&(b=b.becomeResolved(null,b.context)),c.handlerInfos.unshift(b)}if(f.length>0)throw new Error("More context objects were passed than there are dynamic segments for the route: "+r);return i||this.invalidateChildren(c.handlerInfos,d),h(c.queryParams,this.queryParams||{}),c},invalidateChildren:function(e,t){for(var n=t,r=e.length;n<r;++n){var i=e[n];e[n]=i.getUnresolved()}},getHandlerInfoForDynamicSegment:function(e,t,n,r,i,o,s,u){var h;if(r.length>0){if(h=r[r.length-1],l(h))return this.createParamHandlerInfo(e,t,n,r,i);r.pop()}else{if(i&&i.name===e)return i;if(!this.preTransitionState)return i;var c=this.preTransitionState.handlerInfos[s];h=c&&c.context}return a("object",{name:e,getHandler:t,serializer:u,context:h,names:n})},createParamHandlerInfo:function(e,t,n,r,i){for(var o={},s=n.length;s--;){var u=i&&e===i.name&&i.params||{},h=r[r.length-1],c=n[s];if(l(h))o[c]=""+r.pop();else{if(!u.hasOwnProperty(c))throw new Error("You didn't provide enough string/numeric parameters to satisfy all of the dynamic segments for route "+e);o[c]=u[c]}}return a("param",{name:e,getHandler:t,params:o})}})})),r("router/transition-intent/url-transition-intent",["../transition-intent","../transition-state","../handler-info/factory","../utils","../unrecognized-url-error","exports"],(function(e,t,n,r,i,o){"use strict";var s=e.default,a=t.default,l=n.default,u=r.merge,h=r.subclass,c=i.default;o.default=h(s,{url:null,initialize:function(e){this.url=e.url},applyToState:function(e,t,n){var r,i,o=new a,s=t.recognize(this.url);if(!s)throw new c(this.url);var h=!1,f=this.url;function d(e){if(e&&e.inaccessibleByURL)throw new c(f);return e}for(r=0,i=s.length;r<i;++r){var p=s[r],v=p.handler,m=l("param",{name:v,getHandler:n,params:p.params}),g=m.handler;g?d(g):m.handlerPromise=m.handlerPromise.then(d);var y=e.handlerInfos[r];h||m.shouldSupercede(y)?(h=!0,o.handlerInfos[r]=m):o.handlerInfos[r]=y}return u(o.queryParams,s.queryParams),o}})})),r("router/transition-state",["./utils","rsvp","exports"],(function(e,t,n){"use strict";var r=e.forEach,i=e.promiseLabel,o=e.callHook,s=t.Promise;function a(){this.handlerInfos=[],this.queryParams={},this.params={}}a.prototype={promiseLabel:function(e){var t="";return r(this.handlerInfos,(function(e){""!==t&&(t+="."),t+=e.name})),i("'"+t+"': "+e)},resolve:function(e,t){var n=this.params;r(this.handlerInfos,(function(e){n[e.name]=e.params||{}})),(t=t||{}).resolveIndex=0;var i=this,a=!1;return s.resolve(null,this.promiseLabel("Start transition")).then(h,null,this.promiseLabel("Resolve handler")).catch((function(e){var n=i.handlerInfos,r=t.resolveIndex>=n.length?n.length-1:t.resolveIndex;return s.reject({error:e,handlerWithError:i.handlerInfos[r].handler,wasAborted:a,state:i})}),this.promiseLabel("Handle error"));function l(){return s.resolve(e(),i.promiseLabel("Check if should continue")).catch((function(e){return a=!0,s.reject(e)}),i.promiseLabel("Handle abort"))}function u(e){var n=i.handlerInfos[t.resolveIndex].isResolved;if(i.handlerInfos[t.resolveIndex++]=e,!n){var r=e.handler;o(r,"redirect",e.context,t)}return l().then(h,null,i.promiseLabel("Resolve handler"))}function h(){return t.resolveIndex===i.handlerInfos.length?{error:null,state:i}:i.handlerInfos[t.resolveIndex].resolve(l,t).then(u,null,i.promiseLabel("Proceed"))}}},n.default=a})),r("router/transition",["rsvp","./utils","./transition-aborted-error","exports"],(function(e,t,n,r){"use strict";var i=e.Promise,o=t.trigger,s=t.slice,a=t.log,l=t.promiseLabel,u=n.default;function h(e,t,n,r,o){var s=this;if(this.state=n||e.state,this.intent=t,this.router=e,this.data=this.intent&&this.intent.data||{},this.resolvedModels={},this.queryParams={},this.promise=void 0,this.error=void 0,this.params=void 0,this.handlerInfos=void 0,this.targetName=void 0,this.pivotHandler=void 0,this.sequence=void 0,this.isAborted=!1,this.isActive=!0,r)return this.promise=i.reject(r),void(this.error=r);if(this.isCausedByAbortingTransition=!!o,this.isCausedByInitialTransition=o&&(o.isCausedByInitialTransition||0===o.sequence),n){this.params=n.params,this.queryParams=n.queryParams,this.handlerInfos=n.handlerInfos;var a=n.handlerInfos.length;a&&(this.targetName=n.handlerInfos[a-1].name);for(var u=0;u<a;++u){var h=n.handlerInfos[u];if(!h.isResolved)break;this.pivotHandler=h.handler}this.sequence=e.currentSequence++,this.promise=n.resolve((function(){if(s.isAborted)return i.reject(void 0,l("Transition aborted - reject"))}),this).catch(c(s),l("Handle Abort"))}else this.promise=i.resolve(this.state),this.params={}}function c(e){return function(t){return t.wasAborted||e.isAborted?i.reject(f(e)):(e.trigger("error",t.error,e,t.handlerWithError),e.abort(),i.reject(t.error))}}function f(e){return a(e.router,e.sequence,"detected abort."),new u}h.prototype={targetName:null,urlMethod:"update",intent:null,pivotHandler:null,resolveIndex:0,resolvedModels:null,state:null,queryParamsOnly:!1,isTransition:!0,isExiting:function(e){for(var t=this.handlerInfos,n=0,r=t.length;n<r;++n){var i=t[n];if(i.name===e||i.handler===e)return!1}return!0},promise:null,data:null,then:function(e,t,n){return this.promise.then(e,t,n)},catch:function(e,t){return this.promise.catch(e,t)},finally:function(e,t){return this.promise.finally(e,t)},abort:function(){return this.isAborted||(a(this.router,this.sequence,this.targetName+": transition was aborted"),this.intent.preTransitionState=this.router.state,this.isAborted=!0,this.isActive=!1,this.router.activeTransition=null),this},retry:function(){this.abort();var e=this.router.transitionByIntent(this.intent,!1);return null!==this.urlMethod&&e.method(this.urlMethod),e},method:function(e){return this.urlMethod=e,this},trigger:function(e){var t=s.call(arguments);"boolean"==typeof e?t.shift():e=!1,o(this.router,this.state.handlerInfos.slice(0,this.resolveIndex+1),e,t)},followRedirects:function(){var e=this.router;return this.promise.catch((function(t){return e.activeTransition?e.activeTransition.followRedirects():i.reject(t)}))},toString:function(){return"Transition (sequence "+this.sequence+")"},log:function(e){a(this.router,this.sequence,e)}},h.prototype.send=h.prototype.trigger,r.Transition=h,r.logAbort=f,r.TransitionAbortedError=u})),r("router/unrecognized-url-error",["./utils","exports"],(function(e,t){"use strict";var n=e.oCreate;function r(e){if(!(this instanceof r))return new r(e);var t=Error.call(this,e);Error.captureStackTrace?Error.captureStackTrace(this,r):this.stack=t.stack,this.description=t.description,this.fileName=t.fileName,this.lineNumber=t.lineNumber,this.message=t.message||"UnrecognizedURL",this.name="UnrecognizedURLError",this.number=t.number,this.code=t.code}r.prototype=n(Error.prototype),t.default=r})),r("router/utils",["exports"],(function(e){"use strict";var t,n=Array.prototype.slice;t=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var r=t;function i(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}e.isArray=r,e.isPromise=function(e){return("object"==typeof e&&null!==e||"function"==typeof e)&&"function"==typeof e.then};var o=Object.create||function(e){function t(){}return t.prototype=e,new t};function s(e){for(var t in e)if("number"==typeof e[t])e[t]=""+e[t];else if(r(e[t]))for(var n=0,i=e[t].length;n<i;n++)e[t][n]=""+e[t][n]}function a(e,t){var r=arguments;return function(i){var o=n.call(r,2);return o.push(i),t.apply(e,o)}}function l(e,t){if(e){var n="_"+t;return e[n]&&n||e[t]&&t}}e.oCreate=o,e.extractQueryParams=function(e){var t,r=e&&e.length;return r&&r>0&&e[r-1]&&e[r-1].hasOwnProperty("queryParams")?(t=e[r-1].queryParams,[n.call(e,0,r-1),t]):[e,null]},e.log=function(e,t,n){e.log&&(3===arguments.length?e.log("Transition #"+t+": "+n):(n=t,e.log(n)))},e.bind=a,e.forEach=function(e,t){for(var n=0,r=e.length;n<r&&!1!==t(e[n]);n++);},e.trigger=function(e,t,n,r){if(e.triggerEvent)e.triggerEvent(t,n,r);else{var i=r.shift();if(!t){if(n)return;throw new Error("Could not trigger event '"+i+"'. There are no active handlers")}for(var o=!1,s=t.length-1;s>=0;s--){var l=t[s],u=l.handler;if(u){if(u.events&&u.events[i]){if(!0!==u.events[i].apply(u,r))return;o=!0}}else l.handlerPromise.then(a(null,h,i,r))}if("error"===i&&"UnrecognizedURLError"===r[0].name)throw r[0];if(!o&&!n)throw new Error("Nothing handled the event '"+i+"'.")}function h(e,t,n){n.events[e].apply(n,t)}},e.getChangelist=function(e,t){var n,o={all:{},changed:{},removed:{}};i(o.all,t);var a=!1;for(n in s(e),s(t),e)e.hasOwnProperty(n)&&(t.hasOwnProperty(n)||(a=!0,o.removed[n]=e[n]));for(n in t)if(t.hasOwnProperty(n))if(r(e[n])&&r(t[n]))if(e[n].length!==t[n].length)o.changed[n]=t[n],a=!0;else for(var l=0,u=e[n].length;l<u;l++)e[n][l]!==t[n][l]&&(o.changed[n]=t[n],a=!0);else e[n]!==t[n]&&(o.changed[n]=t[n],a=!0);return a&&o},e.promiseLabel=function(e){return"Router: "+e},e.subclass=function(e,t){function n(t){e.call(this,t||{})}return n.prototype=o(e.prototype),i(n.prototype,t),n},e.merge=i,e.slice=n,e.isParam=function(e){return"string"==typeof e||e instanceof String||"number"==typeof e||e instanceof Number},e.coerceQueryParamsToString=s,e.callHook=function(e,t,n,r){var i=l(e,t);return i&&e[i].call(e,n,r)},e.resolveHook=l,e.applyHook=function(e,t,n){var r=l(e,t);if(r)return 0===n.length?e[r].call(e):1===n.length?e[r].call(e,n[0]):2===n.length?e[r].call(e,n[0],n[1]):e[r].apply(e,n)}})),r("router",["./router/router","./router/transition","exports"],(function(e,t,n){"use strict";var r=e.default,i=t.Transition;n.default=r,n.Transition=i})),r("route-recognizer",[],(function(){return{default:n}})),r("rsvp",[],(function(){return t})),r("rsvp/promise",[],(function(){return{default:t.Promise}})),window.Router=i("router")}(window,window.RSVP,window.RouteRecognizer),function(){var e=function(e){var t=function(t){var n,r,i,o,s,a=t.document,l=(t.history,e.Signal),u=/#(.*)$/,h=/(\?.*)|(\#.*)/,c=/^\#/,f="onhashchange"in t&&7!==a.documentMode;location.protocol;function d(e){return String(e||"").replace(/\W/g,"\\$&")}function p(e){if(!e)return"";var t=new RegExp("^"+d(n.prependHash)+"|"+d(n.appendHash)+"$","g");return e.replace(t,"")}function v(){var e=u.exec(n.getURL()),t=e&&e[1]||"";try{return n.raw?t:decodeURIComponent(t)}catch(e){return t}}function m(e,t){if(r!==e){var i=r;r=e,n.changed.dispatch(p(e),p(i))}}function g(e){var t=(e=Array.prototype.slice.call(arguments)).join(n.separator);return t=t?n.prependHash+t.replace(c,"")+n.appendHash:t}function y(e){return e=encodeURI(e)}return s=function(){var e=v();e!==r&&m(e)},n={VERSION:"1.2.0",raw:!1,appendHash:"",prependHash:"/",separator:"/",changed:new l,stopped:new l,initialized:new l,init:function(){var e,a,l;o||(r=v(),f?(a="hashchange",l=s,(e=t).addEventListener?e.addEventListener(a,l,!1):e.attachEvent&&e.attachEvent("on"+a,l)):i=setInterval(s,25),o=!0,n.initialized.dispatch(p(r)))},stop:function(){var e,a,l;o&&(f?(a="hashchange",l=s,(e=t).removeEventListener?e.removeEventListener(a,l,!1):e.detachEvent&&e.detachEvent("on"+a,l)):(clearInterval(i),i=null),o=!1,n.stopped.dispatch(p(r)))},isActive:function(){return o},getURL:function(){return t.location.href},getBaseURL:function(){return n.getURL().replace(h,"")},setHash:function(e){(e=g.apply(null,arguments))!==r&&(m(e),e===r&&(n.raw||(e=y(e)),t.location.hash="#"+e))},replaceHash:function(e){(e=g.apply(null,arguments))!==r&&(m(e),e===r&&(n.raw||(e=y(e)),t.location.replace("#"+e)))},getHash:function(){return p(r)},getHashAsArray:function(){return n.getHash().split(n.separator)},dispose:function(){n.stop(),n.initialized.dispose(),n.stopped.dispose(),n.changed.dispose(),n=t.hasher=null},toString:function(){return'[hasher version="'+n.VERSION+'" hash="'+n.getHash()+'"]'}},n.initialized.memorize=!0,n}(window);return t};"function"==typeof define&&define.amd?define(["signals"],e):"object"==typeof exports?module.exports=e(require("signals")):window.hasher=e(window.signals)}();var AppRouter=function(){var e,t,n,r,i,o,s,a,l,u={name:"",author:"",year:"",url:""},h={},c="",f={},d=[],p={},v=!1;function m(t,n){f={};var r=w(d,t.toLowerCase().split("/"));y(e)?e(t.toLowerCase(),r).then((function(e){e&&g(t,n)})):g(t,n)}function g(e,t){i.handleURL(e.toLowerCase()),l=e,-1==e.toLowerCase().indexOf(t?t.toLowerCase():t)&&(v=!0)}function y(e){return e&&"[object Function]"==={}.toString.call(e)}function w(e,t){var n="";for(var r in e)"options"!=r&&void 0!==e[r].options&&e[r].options.url.toLowerCase().substring(1)==t[0]&&(t.length>1?(t=t.splice(1,1),n=w(e[r],t)):n={state:e[r].options.state,params:e[r].options.params});if(""!==n)return n}function b(e,t,n){if(1==t.length)null==e[t[0]]&&(e[t[0]]=[]),n.state=t[0],e[t[0]].options=n;else{var r=t.slice(0,1);null==e[r]&&(e[r]=[]),t.splice(0,1),b(e[r],t,n)}}function _(e,t,n,r){if(null!=(e=e[t[0]]))if(n+=e.options.url,1==t.length){for(var i in r)r.hasOwnProperty(i)&&(n=n.replace(":"+i,r[i]));window.location.hash=n}else _(e,t=t.splice(1),n,r);else console.error("Invalid state.")}function P(e,i,o,s){1==Object.keys(i).length?(e(i.options.url.toLowerCase()+"/").to(o),e(i.options.url.toLowerCase()).to(o),e("/*").to("notFound")):(e(i.options.url.toLowerCase()+"/").to(o),e(i.options.url.toLowerCase()).to(o,(function(e){for(var t in i)"options"!=t&&P(e,i[t],t,s+1)}))),function(e,i,o){p[e]={model:function(){var e=i.viewUrl,t=window.location.hash.split("/"),n=i.url.split("/");return $.each(n,(function(n,r){r.indexOf(":")>=0&&(e=e.replace(r,t[n]))})),$.get(e).fail(a)},setup:function(e){$.get("",null,(function(){currentLevel=o,i=$.extend(!0,i,h);var s=AppRouter.getStateParams();r={title:i.title,state:i.state,params:i.params,controller:i.Controller};var a=$("body").find("[content-view]");a=$(a[o]),s&&s.controller&&"function"==typeof window[s.controller].destroy&&window[s.controller].destroy(),a.find("*").off(),null!=i.dependencies.css&&x(i.dependencies),a.html(e),y(n)&&n(),"function"==typeof window[i.Controller].init?window[i.Controller].init():console.warn("Controller init function not set."),a.attr("animated")&&a.animateCss("fadeInUp"),y(t)&&t(l)}))}}}(o,i.options,s)}function x(e){$.post("/admin/cacheBuster",{files:e},(function(t){!function(e,t){v&&($(s).nextUntil(o).remove(),v=!1);if(null==t||null==t.insertAfter||null==t.insertBefore)return void console.error("insertAfter and insertBefore must be set.");o=t.insertAfter,s=t.insertBefore;$.each(e,(function(e,t){var n,r=t.time?"?v="+t.time:"";(n=document.createElement("link")).rel="stylesheet",n.href=t.url+r,$(o).before(n)}))}(t,e.options)}))}return{setApp:function(e){return u=e,this},setDefaultOptions:function(e){return h=e,this},getDefaultOptions:function(){return h},setDefaultState:function(e){return p.defaultState={beforeModel:function(){throw""},events:{error:function(t,n){AppRouter.goToState(e)}}},this},setBeforeChange:function(t){return e=t,this},setAfterChange:function(e){return t=e,this},setOnChange:function(e){return n=e,this},setStateExtras:function(e){f=e},getStateExtras:function(){return f},setNotFound:function(e){return p.notFound={setup:function(t){$.get(e.viewUrl,(function(t){var n=$("body").find("[content-view]").last();n.find("*").off(),n.html(t),"function"==typeof window[e.Controller].init?window[e.Controller].init():console.warn("Controller init function not set."),n.attr("animated")&&n.animateCss("fadeInUp"),null!=e.dependencies.css&&x(e.dependencies),Common.unBlockPage()})).fail(a)}},this},state:function(e,t){var n=e.split(".");return b(d,n,t),this},goToState:function(e,t){if("notFound"!=e){var n=e.split(".");_(d,n,"#",t)}else i.transitionTo(e)},getApp:function(){return u},getStateParams:function(){return r},getSessionData:function(){return c},setSessionData:function(e){c=e},setHandleViewError:function(e){return a=e,this},init:function(){(i=new Router.default).getHandler=function(e){return p[e]},i.map((function(e){for(var t in e("/").to("defaultState"),d)P(e,d[t],t,0);e("/*").to("notFound")})),hasher.changed.add(m),hasher.initialized.add(m),hasher.init()}}}();$(document).ready((function(){AppRouter.setDefaultOptions({dependencies:{options:{insertAfter:"#plugins_after",insertBefore:"#plugins_before"}}}).setHandleViewError((function(){$.get("/admin/checksession").done((function(e){e.auth||(window.location="/")})).fail((function(){window.location="/"}))})).setNotFound({viewUrl:"/admin/notfound"}).setBeforeChange((function(){Common.blockPage();var e=$.Deferred();return Common.destroyPortlets(),$("body").removeClass("hide"),e.resolve(!0),e})).setAfterChange((function(e){Common.handleChanges(e),Common.activeMenu(),Common.unBlockPage()})).setOnChange((function(){Common.initPortlets()})).state("permission",{url:"/Permisos",title:"Permisos",viewUrl:"/admin/permission",Controller:"Permisos",dependencies:{css:["/css/permisos.css"]}}).state("role",{url:"/Roles",title:"Roles",viewUrl:"/admin/role",Controller:"Roles",dependencies:{css:["/css/roles.css"]}}).state("users",{url:"/Usuarios",title:"Usuarios",viewUrl:"/admin/user",Controller:"Users"}).state("dependency",{url:"/Dependencias",title:"Dependencias",viewUrl:"/admin/dependency",Controller:"Dependencies"}).state("department",{url:"/Departamentos",title:"Departamentos",viewUrl:"/admin/department",Controller:"Departments"})}));
